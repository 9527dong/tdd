# multi-currency-money

## 第一章、多币种资金
原始报表：

| 票据     | 股份 | 股价        | 合计          |
| -------- | ---- | ----------- | ------------- |
| IBM      | 1000 | 25      | 25000     |
| Novartis | 400  | 100 | 40000 |
|          |      | 合计        | 65000     |

多币种报表:

| 票据     | 股份 | 股价        | 合计          |
| -------- | ---- | ----------- | ------------- |
| IBM      | 1000 | 25美元      | 25000美元     |
| Novartis | 400  | 150瑞士法郎 | 60000瑞士法郎 |
|          |      | 合计        | 65000美元     |

汇率：

| 源币种 | 股份 | 股价        |
| -------- | ---- | ----------- |
| IBM      | 1000 | 1.5    |

需求：产生上述经过修订的多币种报表。

需求分析，要产生上述的多币种报表，需要实现两个功能：
* 在假设已经给定汇率的情况下，要能对两种不同币种的金额进行相加，并将其转换为某一种币种
* 要能将某一金额（每股股价）与另一个数（股数）想乘，并得到一个总金额。

todoList:
- [ ] 当瑞士法郎与美元的兑换率为2:1的时候，5美元+10瑞士法郎=10美元
- [x] 5美元*2=10美元
- [ ] 将"amount"定义为私有
- [ ] Dolla类有副作用吗？在为Dollar对象施加一个操作后，Dollar对象发生了改变。
- [ ] 钱数必须为整数？

开发的5个阶段：
1. 写一个测试程序。
2. 让测试程序编译通过。
3. 运行测试程序，发现不能运行。
4. 让测试程序可以运行。
5. 消除重复设计，优化设计结构。

## 第二章、变质的对象

todoList:
- [ ] 当瑞士法郎与美元的兑换率为2:1的时候，5美元+10瑞士法郎=10美元
- [x] 5美元*2=10美元
- [ ] 将"amount"定义为私有
- [x] Dolla类有副作用吗？在为Dollar对象施加一个操作后，Dollar对象发生了改变。
- [ ] 钱数必须为整数？

将一种感觉（例如，对副作用的厌恶）转化为一个测试程序（例如，对一个Dollar对象连乘两次）是测试驱动开发中的常见方式。从使用者的角度出发，想想使用者会怎么使用Dollar对象，然后根据对应的测试用例重构代码。

## 第三章、一切均等
数值对象（value object）：我们可以把对象当做数值来使用，数值对象的一个要求就是一旦数值对象的实例变量值在构造函数中被指定，以后就不再允许变化。
优点：不可变对象，不需要担心被修改。

数值对象隐含有两个含义，一是所有操作需要返回一个新的对象，另一个隐含的意思意思是数值对象必须实现equals函数。如果用Dollars作为散列表的键值（key），那么如果实现equals方法就必须实现hashCode。
todoList:
- [ ] 当瑞士法郎与美元的兑换率为2:1的时候，5美元+10瑞士法郎=10美元
- [x] 5美元*2=10美元
- [ ] 将"amount"定义为私有
- [x] Dolla类有副作用吗？在为Dollar对象施加一个操作后，Dollar对象发生了改变。
- [ ] 钱数必须为整数？
- [x] 实现equals函数
- [ ] 实现hashcode函数
- [ ] 与空对象判等
- [ ] 与非同类对象判等

判等基本完成了。但是按照经验来说，equals方法有可能传入null，所以需要进行与空对象判等；同样在类型强转的时候，可能发生类转换异常，所以还需要进行Dollar对象如何与非同类对象判等。

## 第四章 私有性
todoList:
- [ ] 当瑞士法郎与美元的兑换率为2:1的时候，5美元+10瑞士法郎=10美元
- [x] 5美元*2=10美元
- [x] 将"amount"定义为私有
- [x] Dollar类有副作用吗？在为Dollar对象施加一个操作后，Dollar对象发生了改变。
- [ ] 钱数必须为整数？
- [x] 实现equals函数
- [ ] 实现hashcode函数
- [ ] 与空对象判等
- [ ] 与非同类对象判等

在第三章重写了equals方法，并且Dollar.times()操作也返回了一个Dollar对象，所以可以重写第一个testMultiplication测试用例，并且隐藏amount属性。

## 第五章 法郎在诉说

todoList:
- [ ] 当瑞士法郎与美元的兑换率为2:1的时候，5美元+10瑞士法郎=10美元
- [x] 5美元*2=10美元
- [x] 将"amount"定义为私有
- [x] Dollar类有副作用吗？在为Dollar对象施加一个操作后，Dollar对象发生了改变。
- [ ] 钱数必须为整数？
- [x] 实现equals函数
- [ ] 实现hashcode函数
- [ ] 与空对象判等
- [ ] 与非同类对象判等
- [x] 5瑞士法郎*2=10瑞士法郎

这次来解决第一个测试，看起来比较复杂。从需求中可以看出，需要现有一个法郎对象，可以先模仿美元对象创建出瑞士法郎对象。这样就会发现存在大量重复设计，所以我们又往清单中添加了3项：

todoList:
- [ ] 当瑞士法郎与美元的兑换率为2:1的时候，5美元+10瑞士法郎=10美元
- [x] 5美元*2=10美元
- [x] 将"amount"定义为私有
- [x] Dollar类有副作用吗？在为Dollar对象施加一个操作后，Dollar对象发生了改变。
- [ ] 钱数必须为整数？
- [x] 实现equals函数
- [ ] 实现hashcode函数
- [ ] 与空对象判等
- [ ] 与非同类对象判等
- [x] 5瑞士法郎*2=10瑞士法郎
- [ ] 美元Dollar、瑞士法郎Franc之间的重复设计
- [ ] 普通判等
- [ ] 普通相乘

## 第六章 再谈一切均等

todoList:
- [ ] 当瑞士法郎与美元的兑换率为2:1的时候，5美元+10瑞士法郎=10美元
- [x] 5美元*2=10美元
- [x] 将"amount"定义为私有
- [x] Dollar类有副作用吗？在为Dollar对象施加一个操作后，Dollar对象发生了改变。
- [ ] 钱数必须为整数？
- [x] 实现equals函数
- [ ] 实现hashcode函数
- [ ] 与空对象判等
- [ ] 与非同类对象判等
- [x] 5瑞士法郎*2=10瑞士法郎
- [ ] 美元Dollar、瑞士法郎Franc之间的重复设计
- [x] 普通判等
- [ ] 普通相乘

在为Dollar和Franc类抽象出统一的父类Money时，又带来了新的问题，当我们将法郎对象和美元对象作比较时会发生什么事情呢？所以需要再向TODOLIst中添加一项。

- [ ] 比较法郎对象与美元对象

## 第七章 苹果和桔子

todoList:
- [ ] 当瑞士法郎与美元的兑换率为2:1的时候，5美元+10瑞士法郎=10美元
- [x] 5美元*2=10美元
- [x] 将"amount"定义为私有
- [x] Dollar类有副作用吗？在为Dollar对象施加一个操作后，Dollar对象发生了改变。
- [ ] 钱数必须为整数？
- [x] 实现equals函数
- [ ] 实现hashcode函数
- [ ] 与空对象判等
- [ ] 与非同类对象判等
- [x] 5瑞士法郎*2=10瑞士法郎
- [ ] 美元Dollar、瑞士法郎Franc之间的重复设计
- [x] 普通判等
- [ ] 普通相乘
- [x] 比较法郎对象与美元对象

用一种合理但并不完美的方法（getClass()）使得程序运行通过，并添加下一个待办事项。
- [ ] 货币？